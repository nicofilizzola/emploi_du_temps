{% extends 'base.html.twig' %}


{% block body %}
<div class="row">
    <div class="mx-auto col-md-9 bg-light rounded p-5">
        <h3 class="text-center">Liste de matières</h3>
        <a class=" mt-3 btn btn-primary btn-block" href="{{ path('app_subject_create') }}">Ajouter une matière</a>

        {# Searchbar #}
        <div class="mt-4 row">
            <div class="col-md-6">
                <label>Recherche spécifique :</label>
            </div>
        </div>
        <div class="mb-2 form-control d-flex align-items-center justify-content-between">
            <input class="w-100" type="text" placeholder="Chercher une matière..." id="js-subject-searchbar">
            <img class="btn-icon" src="{{ asset('img/search-solid.svg') }}" alt="research button">
        </div>
        

        <table class="mt-4 w-100">
            <thead class="bg-dark text-light">
                <th class="px-2 py-3">Code matière</th>
                <th class="px-2 py-3">Nom</th>
                <th class="px-2 py-3">PPN ou Abbréviation</th>
                <th class="px-2 py-3">Semestre</th>
                <th class="px-2 py-3">Code apogée</th>
                <th class="px-2 py-3">Actions</th>
            </thead>
            <tbody>

        {% for subject in subjects %}
                <tr class="js-subject-result hoverable">
                    <td class="p-2">{{ subject }}</td>
                    <td class="p-2">{{ subject.name }}</td>
                    <td class="p-2">{{ subject.ppn }}</td>
                    <td class="p-2">{{ subject.semester }}</td>
                    <td class="p-2">{{ subject.ca }}</td>
                  {# DELETE CELL #}
                    <td class="p-2">
                        <button 
                            class="btn btn-danger btn-block"
                            onclick="event.preventDefault(); if (window.confirm('Êtes-vous sûr(e) de vouloir supprimer la matière {{ subject }} ?')) { document.getElementById('js-subject-delete-{{ subject.id }}').submit(); }"
                            disabled="disabled"
                        >
                            Supprimer
                        </button>
                    </td>
                </tr>
        {% endfor %}
            </tbody>
        </table>
    </div>
</div>

<script src="{{ asset('js/functions/searchbar.js') }}" type="text/javascript"></script>
<script src="{{ asset('js/routes/subject/index.js') }}" type="text/javascript"></script>
{% endblock %}
